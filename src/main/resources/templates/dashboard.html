<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

<head>
    <div th:replace="/fragments/head :: header"></div>
    <!--     Table Related Scripts-->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript" th:inline="javascript">

        // Load the Visualization API and the corechart package.
        google.charts.load('current', {'packages':['corechart']});

        // Set a callback to run when the Google Visualization API is loaded.
        google.charts.setOnLoadCallback(drawChart);

        // Callback that creates and populates a data table,
        // instantiates the pie chart, passes in the data and
        // draws it.
        function drawChart() {

            // Create the data table.
            var data = new google.visualization.DataTable();
            data.addColumn('string', 'Topping');
            data.addColumn('number', 'Slices');
            data.addRows([[${chartData}]]);

            var data2 = new google.visualization.DataTable();
            data2.addColumn('string', 'Toppin');
            data2.addColumn('number', 'Slice');
            data2.addRows([[${chartData2}]]);

            var data3 = new google.visualization.DataTable();
            data3.addColumn('string', 'Toppi');
            data3.addColumn('number', 'Slic');
            data3.addRows([[${chartData3}]]);

            // Set chart options
            var options = {
                'width':400,
                'height':300};
            var options2 = {
                'width':400,
                'height':300};
            var options3 = {
                'width':400,
                'height':300};

            // Instantiate and draw our chart, passing in some options.
            var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
            var chart2 = new google.visualization.PieChart(document.getElementById('chart_div2'));
            var chart3 = new google.visualization.PieChart(document.getElementById('chart_div3'));
            chart.draw(data, options);
            chart2.draw(data2, options2);
            chart3.draw(data3, options3);
        }
    </script>
</head>

<body>
    <div class="dashboard-main-wrapper">
        <div th:replace="/fragments/header :: header"></div>
        <div th:replace="/fragments/left-sidebar :: left-sidebar"></div>
        <div class="dashboard-wrapper">
            <div class="dashboard-ecommerce">
                <div class="container-fluid dashboard-content mt-1 pt-1">
                    <div class="ecommerce-widget">
                        <div class="row justify-content-center">
                            <div class="col-4">
                                <div class="card justify-content-start">
                                    <h4 class="card-title text-center">Total Product Sales</h4>
                                    <div class="card-body mt-0 pt-0">
                                        <div id="chart_div"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-4">
                                <div class="card justify-content-start">
                                    <h4 class="card-title text-center">Total Product Expenses</h4>
                                    <div class="card-body mt-0 pt-0">
                                        <div id="chart_div2"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-4">
                                <div class="card justify-content-start">
                                    <h4 class="card-title text-center">Profit / Loss</h4>
                                    <div class="card-body mt-0 pt-0">
                                        <div id="chart_div3"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-8 grid-margin">
                                <header class="panel-heading"><h3 class="panel-title text-center">Last Transactions</h3></header>
                                <div class="card">
                                    <div class="card-body">
                                        <table id="topinvoicetable"
                                               class="table table-striped table-bordered file-export"
                                               style="width:100%">
                                            <thead>
                                            <tr>
                                                <th scope="col">Invoice No</th>
                                                <th scope="col">Client / Vendor</th>
                                                <th scope="col">Date</th>
                                                <th scope="col">Price (without tax)</th>
                                                <th scope="col">Tax Amount</th>
                                                <th scope="col">Total</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr th:each="invoice:${invoices}">
                                                <td th:text="${invoice.invoiceNo}"></td>
                                                <td th:text="${invoice.clientVendor.getClientVendorName}"></td>
                                                <td th:text="${invoice.date}"></td>
                                                <td th:text="${invoice.price}"></td>
                                                <td th:text="${invoice.tax}"></td>
                                                <td th:text="${invoice.total}"></td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 grid-margin">
                                <header class="panel-heading"><h3 class="panel-title text-center">Exchange Rates (1 USD)</h3></header>
                                <div class="card">
                                    <div class="card-body">
                                        <table id="exchangetable"
                                               class="table table-striped table-bordered file-export"
                                               style="width:100%">
                                            <thead>
                                            <tr>
                                                <th scope="col">Currency</th>
                                                <th scope="col">Exchange Rate</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr>
                                                <!--<tr th:each="invoice,comStat : ${invoices}">-->
                                                <!--<td th:text="${comStat.count}"></td>-->
                                                <!--<td th:text="${invoice.invoiceNo}"></td>-->
                                                <td>Euro</td>
                                                <td th:text="${exchangeRates.getEuro()}"></td>
                                            </tr>
                                            <tr>
                                                <td>British Pound</td>
                                                <td th:text="${exchangeRates.getBritishPound()}"></td>
                                            </tr>
                                            <tr>
                                                <td>Japanese Yen</td>
                                                <td th:text="${exchangeRates.getJapaneseYen()}"></td>
                                            </tr>
                                            <tr>
                                                <td>Indian Rupee</td>
                                                <td th:text="${exchangeRates.getIndianRupee()}"></td>
                                            </tr>
                                            <tr>
                                                <td>Canadian Dollar</td>
                                                <td th:text="${exchangeRates.getCanadianDollar()}"></td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div th:replace="/fragments/footer :: footer"></div>
    <div th:replace="/fragments/javascript :: js"></div>
</body>

</html>